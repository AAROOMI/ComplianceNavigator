<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Metaworks Cybersecurity Compliance Platform</title>
    <meta name="description" content="NCA ECC V1 & V2 Compliance Management with AI-powered assistance" />
    
    <!-- D-ID Interactive AI Agent -->
    <!-- D-ID Agent Custom Integration -->
  </head>
  <body>
    <div id="root"></div>
    
    <!-- Custom D-ID Agent Container -->
    <div id="did-agent-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 10000;">
      <div id="did-agent-window" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 800px; height: 1000px; border-radius: 20px; overflow: hidden; box-shadow: 0 20px 60px rgba(0, 173, 181, 0.3); background: white;">
        
        <!-- Agent Interface -->
        <div style="position: relative; width: 100%; height: 100%; background: linear-gradient(135deg, #f8f9fa, #e9ecef);">
          
          <!-- Top Bar with Name and Controls -->
          <div style="position: absolute; top: 20px; left: 20px; right: 20px; display: flex; justify-content: space-between; align-items: center; z-index: 10002;">
            <!-- Name Badge -->
            <div style="background: rgba(0, 0, 0, 0.7); color: white; padding: 8px 20px; border-radius: 25px; font-size: 16px; font-weight: 500;">
              AI Assistant
            </div>
            
            <!-- Control Buttons -->
            <div style="display: flex; gap: 10px; align-items: center;">
              <!-- Audio Toggle -->
              <button id="audio-toggle" style="background: rgba(0, 0, 0, 0.7); border: none; border-radius: 50%; width: 45px; height: 45px; color: white; font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                üîä
              </button>
              <!-- Close Button -->
              <button id="close-agent" style="background: rgba(255, 255, 255, 0.9); border: none; border-radius: 50%; width: 45px; height: 45px; font-size: 20px; cursor: pointer; color: #333; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);">√ó</button>
            </div>
          </div>
          
          <!-- Agent Video/Avatar Area -->
          <div style="position: absolute; top: 80px; left: 0; right: 0; bottom: 120px;">
            <iframe 
              id="did-agent-iframe"
              src="https://studio.d-id.com/agents/share?id=agt_56bnv71C&utm_source=copy&key=WVhWMGFEQjhOamRsWldJM05tWXdPVFk1WkRVMFlqZzJOMlk0WldFM09rTXdjRXhxZUhwRFlrbDBWV3QwTjFkQlEwNTZXUT09"
              style="width: 100%; height: 100%; border: none; background: transparent;"
              allow="microphone; camera"
              allowfullscreen>
            </iframe>
          </div>
          
          <!-- Bottom Input Area -->
          <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 120px; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-top: 1px solid rgba(0, 0, 0, 0.1);">
            <div style="padding: 20px; height: 100%; display: flex; align-items: center; gap: 15px;">
              <!-- Text Input -->
              <div style="flex: 1; position: relative;">
                <input 
                  type="text" 
                  id="agent-input"
                  placeholder="Type here..."
                  style="width: 100%; padding: 15px 50px 15px 20px; border: 2px solid #e0e0e0; border-radius: 25px; font-size: 16px; outline: none; background: white; transition: border-color 0.3s ease;"
                  onFocus="this.style.borderColor='#00adb5'"
                  onBlur="this.style.borderColor='#e0e0e0'"
                />
                <!-- Microphone Button -->
                <button 
                  id="mic-button"
                  style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: #00adb5; border: none; border-radius: 50%; width: 40px; height: 40px; color: white; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background-color 0.3s ease;"
                  onMouseEnter="this.style.backgroundColor='#008a94'"
                  onMouseLeave="this.style.backgroundColor='#00adb5'"
                >
                  üé§
                </button>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </div>
    
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Custom D-ID Agent Initialization -->
    <script>
      window.addEventListener('load', function() {
        // Create custom agent button
        const agentButton = document.createElement('button');
        agentButton.innerHTML = 'ü§ñ AI Assistant';
        agentButton.id = 'open-did-agent';
        agentButton.style.cssText = `
          position: fixed;
          bottom: 20px;
          right: 20px;
          z-index: 9999;
          background: linear-gradient(135deg, #00adb5, #00c896);
          color: white;
          border: none;
          border-radius: 50px;
          padding: 15px 25px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          box-shadow: 0 6px 20px rgba(0, 173, 181, 0.4);
          transition: all 0.3s ease;
        `;
        
        // Hover effects
        agentButton.addEventListener('mouseenter', function() {
          this.style.transform = 'translateY(-3px) scale(1.05)';
          this.style.boxShadow = '0 8px 25px rgba(0, 173, 181, 0.5)';
        });
        
        agentButton.addEventListener('mouseleave', function() {
          this.style.transform = 'translateY(0) scale(1)';
          this.style.boxShadow = '0 6px 20px rgba(0, 173, 181, 0.4)';
        });
        
        // Open agent overlay
        agentButton.addEventListener('click', function() {
          const overlay = document.getElementById('did-agent-overlay');
          overlay.style.display = 'block';
          document.body.style.overflow = 'hidden';
        });
        
        // Close agent overlay
        document.getElementById('close-agent').addEventListener('click', function() {
          const overlay = document.getElementById('did-agent-overlay');
          overlay.style.display = 'none';
          document.body.style.overflow = 'auto';
        });
        
        // Audio toggle
        document.getElementById('audio-toggle').addEventListener('click', function() {
          // Toggle audio state
          if (this.innerHTML === 'üîä') {
            this.innerHTML = 'üîá';
            this.title = 'Enable Audio';
          } else {
            this.innerHTML = 'üîä';
            this.title = 'Disable Audio';
          }
        });
        
        // Microphone button
        document.getElementById('mic-button').addEventListener('click', function() {
          // Handle voice input
          const input = document.getElementById('agent-input');
          if (this.style.backgroundColor === 'rgb(220, 53, 69)' || this.style.backgroundColor === '#dc3545') {
            // Stop recording
            this.style.backgroundColor = '#00adb5';
            this.innerHTML = 'üé§';
            input.placeholder = 'Type here...';
          } else {
            // Start recording
            this.style.backgroundColor = '#dc3545';
            this.innerHTML = '‚è∏Ô∏è';
            input.placeholder = 'Listening...';
          }
        });
        
        // Text input handling
        document.getElementById('agent-input').addEventListener('keypress', function(e) {
          if (e.key === 'Enter' && this.value.trim()) {
            // Handle text input
            console.log('Sending message:', this.value);
            this.value = '';
          }
        });
        
        // Close on overlay click
        document.getElementById('did-agent-overlay').addEventListener('click', function(e) {
          if (e.target === this) {
            this.style.display = 'none';
            document.body.style.overflow = 'auto';
          }
        });
        
        // Add agent button to page
        document.body.appendChild(agentButton);
      });
    </script>
  </body>
</html>